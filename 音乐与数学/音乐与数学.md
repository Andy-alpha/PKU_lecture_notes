# Music and Mathematics

<font face = "Heiti SC" size = 4 color = 0000FF>王杰 北大数院</font>

公共邮箱：musicmathspku@163.com

成绩评定：<font face = "STKaiti" size = 4 color = FF0000>平时20分，研究题30分，期末考试（闭卷笔试）50分（12月12日周一晚上10-11节）。</font>

<img src="/Users/apple/Pictures/0200.jpg" alt="插图" style="zoom:33%;" />

## 大致安排

| 月份/日期 |      |      |      |      |
| --------- | ---| ---- | ---- | ---- |
| 10月      | 10             | 17   | 24   | 31   |
|           | 律学 |      | 随机性与AI | 调性、和弦 |
| 11月      | 7    | 14   | 21   | 28   |
|           | 旋律与 | 对称 | 音乐中的 | 集合与变换 |
| 12月      | 5    | 12   |      |      |
|           | 节奏、课程小结 |      |      |      |



## 音程

和谐的音程：<font face = "STKaiti" size = 4 color = FF0000>同度（1:1）、八度（2:1）、纯五度（3:2）、纯四度（4:3）。</font>

## 旋律

### 旋律关于平移的对称

<font face="Trattatello, fantasy" color="green">Georges Bizet</font>歌剧《卡门》，运用节奏型，构成节奏卡农。
$$
\begin{array}{l}
A=\set{0,3,4,6},B=\set{6,9,10,12}\\
A+B=\set{0,3,4,6,10,12}，但不是直和。\\
*两个集合A、B之和A+B为直和\text{(direct sum)}要求：\\\\
对于∀a,a'∈A和∀b,b'∈B\\
a+b=a'+b'⇔a=a'且b=b'\\\\
记作A⊕B.
\end{array}
$$

例如，A = { 0, 5, 6, 7 }, B = { 0, 4, 8 }, 对它们进行模12的加法，直和

$$
A⊕B=\set{i∈ℝ\mid0≤i≤15}=\set{i∈ℝ\mid0≤i≤11}=ℤ_{12}(\mod 12)
$$

其中A为**节奏动机(rhythmic motif)**或者**内节奏(inner rhythm)**；B为**外节奏(outer rhythm)**。

### 旋律关于垂线的对称

可以把Bach的曲子写在Möbius strip上，（左右对称），术语为**逆行(retrograde)**。

### 沿水平方向直线的对称

如《雷神》为**倒影(inversion)**

Symmetry can be described by what is called group theory, as a result, the group theory is necessary for our research.

| 变换    | **e** | **I** | **R** | **R*I** |
| ------- | ----- | ----- | ----- | ------- |
| **e**   | e     | I     | R     | R*I     |
| **I**   | I     | e     | R*I   | R       |
| **R**   | R     | R*I   | e     | I       |
| **R*I** | R*I   | R     | I     | e       |

其中R\*I=I\*R。

Claude-Achille Debussy（德彪西）：*Music is the arithmetic of sounds as optics is the geometry of light.* 

## 音乐基础知识

### 声音的物理属性

**音乐**：凭借声波振动而存在，在时间中展现，通过人类的听觉器官而引起各种情绪反应和情感体验的艺术门类。<font face = "STKaiti" size = 4 color = FF0000>并没有说一定要好听。</font>

由四个物理属性：振动频率（音高pitch）、振动幅度（力度dynamics）、时间长度（时值duration）、振动波形（音色timbre）决定。

### 频率—音高

1. 人耳能听见的频率：20~20000Hz
2. 标准A“音乐会音高”（concert pitch）：440Hz
3. 人耳非线性，例如300Hz-600Hz听起来是八度，但是1200-1500Hz听起来是个大三度

### 频率与振幅

### 声压—力度

1. 人在频率为1 kHz时，能听见：p0=2e-5Hz=20µHz（听觉下限）
2. 声压水平：$L_p=20\lg_(\frac{p}{p_0})$，单位为分贝。p为声压。

### 音色与波形

1. 不同乐器表现出不同的振动波形。
2. 振幅包络（envelope）**A**(Attack)、**D**(Decay)、**S**(Sustain)、**R**(Release)。
3. 频率成分：频谱（spectrogram），可以用横坐标是time，纵坐标是频率frequency的图表示。

$$
\begin{array}{lcl}
f(x)=\frac{a_0}2+\sum_{n=1}^\infty(a_n\cos nx+b_n\sin nx)\\
\end{array}
$$

### 傅里叶分析的基本思想

时域↔频域，选用的基和描述不同。

## 乐音体系

### 乐音体系

1. 声音可以分为**乐音**(musical tone)和**噪音**(noise)两种，**打击乐器**（percussion instruments）中一类是具有**固定音高**（definitely pitched）的，例如木琴（xylophone）；另一类是**不具有固定音高的**（indefinitely pitched），例如小军鼓（snare drum）、大镓等（cymbal）。
2. 音乐中所使用的、具有固定音高的全体乐音构成一个**集合**（set），称为乐音体系，其中的**元素**（elements）称作**音级**。
3. 音级从低到高排列得到**音列**，相邻的两个音级之间相差一个半音。
4. **八度**（octave）通常88个键$A_0~C_8，中央C是C_4$。
5. 不同的音名代表同一个音的，是**等音的**（enharmonic）。
6. 唱名法（do re mi fa so la ti）
7. **记谱法**（notation），现在通用**五线谱**，水平方向代表时间维度，纵向代表音高。
8. 节奏、旋律、和声是音乐的三大要素。其中节奏是最重要的。

### 节拍

1. **拍子**（beat）是一段音乐中的基本律动（pulse）
2. 拍子（time signature）
3. 二拍子和三拍子往往称为单拍子，而由**相同**单拍子结合而成的拍子称为复拍子。
4. **节拍**（meter）：若干拍按照一定的强弱组合，**节奏**（rythm）由音符的不同时值组合构成的模式。
5. 附点音符：1.5·时值。
6. 休止符（rest）（注意全休止符和二分休止符位置不一样）
7. 速度（tempo）：每分钟多少拍。
8. 𝄞、𝄢、𝄡加在合适位置𝄃1234𝄀4321𝄂。
9. 调号（key signature），记在谱号前面的变音记号，对同一组音名的都变。
10. **临时变音记号**，作用范围仅限于该记号之后、至本小节结束。

### 简谱（略）

9月19日作业

1. 反复聆听Mozart: Zwölf Variationen in C über das französische Lied "_Ah, vous dirai-je Maman_"(K. 265)，熟悉五线谱。
2. 仔细聆听民族管弦乐《春江花月夜》，感受民族音乐旋律的变化、发展。
3. 巴托克《小宇宙》no. 141 感受无调性

### 音程

<font face="Trattatello, fantasy" color="green">Edwin Evans</font>: Music is, however, an art not of notes but of intervals.

在乐音体系中，两个音级之间的距离称为**音程**（interval）。在音程中，上方的音称为**上方音**，也称为**冠音**；低的音，称为**下方音**，也称为**根音**。

音程中的两个音可以先后发声，称为**旋律音程**，也可以同时发声，称为**和声音程**。

**音程**的名称由两个参数共同确定：**度数**和**半音数**，缺一不可。

**度数**：包括自己在内，两个音级在五线谱上包括的线和间的数目。

**半音数**：是音程所包含半音的数目。

- 音数为½的二度，叫作“小二度”。基本音级间小二度有两个（E-F和B-C）。
- 音数为1的二度，叫作“大二度”。基本音级间有五个（C-D、D-E、F-G、G-A和A-B）。
- 音数为1½的三度，叫作“小三度”。基本音级间小三度有四个（D-F、E-G、A-C和B-D）。
- 音数为2的三度，叫作“大三度”。基本音级间大三度有三个（C-E、F-A和G-B）。
- 音数为2½的四度，叫作“纯四度”。基本音级间纯四度有六个（C-F、D-G、E-A、G-C、A-D和B-E）。
- 音数为3的四度，叫作“增四度”。基本音级间，增四度只有一个：F-B。
- 音数为3的五度，叫作“减五度”。基本音级间，减五度只有一个：B-F。
- 音数为3½的五度，叫作“纯五度”。基本音级间纯五度有六个（C-G、D-A、E-B、F-C、G-D和A-E）。
- 音数为4的六度，叫做“小六度”。基本音级间小六度有三个（E-C、A-F、B-G）。
- 音数为4½的六度，叫做“大六度”。基本音级间大六度有四个（F-D、G-E、C-A和B-A）。
- 音数为5的七度，叫做“小七度”。基本音级间小七度有五个（D-C、E-D、G-F、A-G和D-B）。
- 音数为5½的七度，叫做“大七度”。基本音级间大七度有两个（C-B和F-E）。
- 音数为6的八度，叫作“纯八度”。基本音级间纯八度有七个（每个音同其上方的音）。
- 编成一句顺口溜，就是一四五八没大小，二三六七没有纯。
- 音程的标记，度数用阿拉伯数字标记，音数用大、小、增、减、纯、倍增、倍减来标记。如大三度音程就写成“大₃”，小六度音程就写成“小₆”，纯四度就写成“纯₄”等等。

#### 自然音程与变化音程

大小二度、大小三度、大小六度、大小七度音程，以及纯一度、纯四度、纯五度、纯八度、增四度、减五度音程统称为**自然音程**（diatonic interval）（可以在钢琴上不用黑键弹出的为自然音程）。

从自然音程出发，改变其半音数，可以得到**变化音程**。

- 大音程和纯音程增加半音时，成为增音程。
- 小音程和纯音程减少半音时，成为减音程。
    - 纯一度无论作何半音变动都将使音数增加，成为增一度。因此，减一度是不存在的。
- 减音程减少半音时，成为倍减音程。
- 增音程增加半音时，成为倍增音程。
- 小音程增加半音时，成为大音程。
- 大音程减少半音时，成为小音程。
- 倍增音程减少半音时，成为增音程。
- 倍减音程增加半音时，成为减音程。
- 增音程减少半音时，有两种可能：一度、四度、五度、八度成为纯音程，二度、三度、六度、七度成为大音程。
- 减音程增加半音时，有两种可能：四度、五度、八度，成为纯音程；二度、三度、六度、七度， 成为小音程。

下表括号中是半音数，加粗的是自然音程。

| 音程 | 减音程      | 小音程       | 纯音程       | 大音程      | 增音程      |
| ---- | ----------- | ------------ | ------------ | ----------- | ----------- |
| 一度 |             |              | **C-C(0)**   |             | C-♯C(1)     |
| 二度 | ♯C-♭D(0)    | **C-♭D(1)**  |              | **C-D(2)**  | C-♯D(3)     |
| 三度 | ♯C-♭E(2)    | **C-♭E(3)**  |              | **C-E(4)**  | C-♯E(5)     |
| 四度 | ♯C-F(4)     |              | **C-F(5)**   |             | **C-♯F(6)** |
| 五度 | **♯C-G(6)** |              | **C-G(7)**   |             | C-♯G(8)     |
| 六度 | ♯C-♭A(7)    | **C-♭A(8)**  |              | **C-A(9)**  | C-♯A(10)    |
| 七度 | ♯C-♭B(9)    | **C-♭B(10)** |              | **C-B(11)** | C-♯B(12)    |
| 八度 | ♯C-C'(11)   |              | **C-C'(12)** |             | C-♯C'(13)   |

#### 协和音程与不协和音程

通常认为，纯四度、纯五度和纯八度音程及大小三度、大小六度音程属于**协和音程**（consonant interval），二度、七度音程和其他所有增、减音程都属于**不协和音程**（dissonant interval）。
$$
音程\begin{cases} 
协和音程  & \begin{cases} 
极完全协和音程  & 纯一度、纯八度\\
不完全协和音程 & 纯四度、纯五度\\
不完全协和音程 & 大小三度、大小六度
\end{cases} \\
不协和音程 & 大小二度、大小七度，以及所有增、减、倍增、倍减音程
\end{cases}
$$
## 弦外之音

Viberation equation and Overtones

弦的振动

**泛音列**（harmonic series）：f, 2f, 3f, 4f, ⋯

### 徽位与泛音

**呼麦**（Khoomei），又称喉音唱法（throat singing）、泛音唱法（overtone singing）、多声唱法（polyphonic singing），突出某些泛音，唱出两个声部的效果。

开管只有奇次泛音，闭管只有偶次泛音。

超吹（overblow）：吹出高次泛音

## 乐音体系的形成——律学（Temperaments）

实际上要解决两个问题：确定每个音级的**绝对音高**（absolute pitch）和八度内不同音级的**相对音高**（relative pitch）。

### 三分损益

管仲：《管子》（宫、商、角、徵、羽）

| 徵   | 羽   | 宫   | 商   | 角   |
| ---- | ---- | ---- | ---- | ---- |
| 108  | 96   | 81   | 72   | 64   |
| G    | A    | C    | D    | E    |

理解为乐器长度，与频率与反比。以宫音为中央C，就得到。

考虑比例：

- “徵—宫”比例为3:4，纯四度；
- 高八度的徵音为108÷2=54，宫音与它比例为2:3。
- “宫—商”、“徵—羽”、“商—角”比例为8:9，为大二度。
- 但是其他的有不符。引入变音：

| 徵   | 羽   | 变宫            | 宫   | 商   | 角   | 变徵            |
| ---- | ---- | --------------- | ---- | ---- | ---- | --------------- |
| 108  | 96   | $\frac{256}{3}$ | 81   | 72   | 64   | $\frac{512}{9}$ |
| G    | A    | B               | C    | D    | E    | ♯F              |

“清宫”等指高八度的宫音等。

《吕氏春秋》：黃鐘、林鐘、《後漢書·律曆志上》：“以黃鐘為宮，太簇為商，姑洗為角，林鐘為徵、南呂為羽，應鐘為變宮，蕤賓為變徵。”

存在问题：“旋宫不归”，循环操作后，本来应得到宫音，但实际高于清宫的高音C。

### 五度相生（*Pythagoras*）

Pythagoras音差：$\frac{3^{12}}{2^{19}}$≈1.013 643

$\frac{3^{12}}{2^{19}}=(\frac32)^{12}(\frac12)^7$，所以可以通过从C出发，连续向上方做12度纯五度，再连续降低7个八度（相当于上升84个半音再下降84个半音），发现略高于原音。

单声音乐（monophony）：指单一曲调所构成的音乐，包括没有伴奏的独唱、独奏，以及曲调作同度或八度重叠的合唱。

### 纯律与中庸律

公元9世纪前后出现**奥尔加农**（Organum），多声部音乐的雏形。

多声部音乐可以分为：

1. **复调音乐**（polyphony）：不同声部具有各自的相对独立性，按照**对位法**（counterpoint）结合在一起。
2. **主调音乐**（homophony）：以一个声部作为主要旋律声部、其余声部缺少相对独立性，对主要声部起伴奏、烘托的作用。
> 例如*Bach*《音乐的奉献》中有一首六声部Ricercar(6-part fugue)。

- 因为三度和六度的应用需要，增加一个5:4的大三度的比例，这就有了**纯律**（just intoation）。
- 纯八度（2:1），纯五度（3:2），纯四度（4:3），大三度（5:4）。实际上就是取了泛音列的前四个。

### 平均律

弥补各个平均律的缺陷，许多人做了努力。但是其实是$\sqrt[12]{2}$是无理数，所以在ℚ域内不可能做到，除非扩展到ℝ。

$\sqrt[12]{2}$≈1.059 463 094 359 295 264 561 825

由朱载堉首先计算出。

### 音分

精确度量音程的单位是**音分**（cents），由（Alexander John Ellis）。

设两个频率分别为$f_1、f_2$，则这两个频率间的音分为$c=1200\log_2\frac{f_2}{f_1}$。

例如十二平均率中半音之前的频率$\sqrt[12]{2}$换算成100（单位：音分）。

反过来，$\frac{f_2}{f_1}=2^\frac c{1200}$。

例如：把C频率定为f，G高700音分，则为1.49f

在此意义下纯五度，$c = 1200\times \log_23= 702(音分)$

| 不同律制音分值    | C    | D    | E    | F    | G    | A    | B    | C'   |
| ----------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 十二平均律        | 0    | 200  | 400  | 500  | 700  | 900  | 1100 | 1200 |
| 三分损益/五度相生 | 0    | 204  | 408  | 498  | 702  | 906  | 1110 | 1200 |
| 纯律              | 0    | 204  | 386  | 498  | 702  | 884  | 1088 | 1200 |
| 中庸律            | 0    | 193  | 386  | 503  | 697  | 890  | 1083 | 1200 |

### 绝对音高 A₄ = 440 Hz (concert pitch)

1955年，国际标准化组织（IOS - International Organization for Standardization）接受A₄ = 440 Hz为技术标准。

### 一个八度为什么有12个半音

其实不一定，如传统Arabic音乐中，有约四分之一音（《Sid Meier's Civilization VI》曲风？）

7/12是纯五度的一个最佳有理逼近

$\log_2\frac32=0.5849635\cdots\\1,\frac12,\frac35,\frac7{12},\frac{24}{41},\frac{31}{53},\frac{179}{306},\cdots$

## 音乐与随机性

Music, Chance and Computer

### 音乐骰子游戏

预告准备好音乐片段，通过投点决定演奏哪一段。

### 随机音乐（stochastic music）

P(ξ=k)为随机变量ξ的概率分布（probabililty distribution）。

一般，$记P(ξ=k)=p_k\\p_k≥0，∀k∈Ω\\\sum\limits_{k∈Ω}p_k=1$

ξηζ

随机过程 stochastic process

### 马尔科夫链

马尔科夫性质（Markov property）：移动到下一个状态的条件概率只与当前状态有关，与过去所有状态无关。即无记忆性（memorylessness）。

具有Markov性质的过程称为Markov chain。

一个马尔科夫链称为时间齐次的（time-homogeneous），if:∀x,y∈Ω, ∀t>0, $P(ξ_{t+1}=y❘ξ_t=x)=P(ξ_t=y❘ξ_{t-1}=x)$，则可以用转移概率矩阵来刻画把$P(ξ_{t+1}=k_j❘ξ_t=k_i)$称为状态{$ξ_{t+1}=k_i$}到{$ξ_{t+1}=k_j$}的转移概率（transition probability），记作pĳ，可以排成n×n方阵。
$$
\mathbf{P}=(p_{ij})=
\begin{pmatrix}
p_{11}&p_{12}&⋯&p_{1n}\\
p_{21}&p_{22}&⋯&p_{2n}\\
⋮&⋮&~&⋮\\
p_{n1}&p_{n2}&⋯&p_{nn}
\end{pmatrix}\\
其中\sum_{j=1}^n p_{ij}=1
$$

### 机器学习·音乐信息检索

- 音乐信息检索（MIR≔Music Information Retrieval）
- 音乐流派分类（Music Genre Classification）：是MIR的重要研究领域。
- 特征提取—MFCC，梅尔刻度(mel-scale)，由StanleySmithStevens、JohnVolkman和Newman于1937年命名。它是基于彼此等距的听众对音高(pitch)的感性判断的刻度。
- Mel标度：$m=2595\log_{10}(1+\frac{f}{700})=1127\ln(1+\frac{f}{700})$
- 学习样本[GTZAN](http://marsyas.info/downloads/datasets.html)：包含1000条音乐，归一化。
- 非监督学习（Unsupervised learning）

## 调式、音阶与和弦（Modes, Scales and Chords）

### 调式

若干音级围绕着某一个有**稳定感**的中心音级，按照一定的音程关系组织在一起构成的乐音体系称为**调式**（mode）。调式中具有稳定感的中心音级称为**主音**（tonic）。

比如《白毛女》，民歌类常以Sol作为中心音。

《孤勇者》则开头段无主音，为了盈造气氛。

将调式中的音级**从主音开始**，按照高低次序排列起来，直到**高八度的主音**，这样形成的音级序列为**（调式）音阶**。

**自然大调**（major）是由两个相同的四声音阶结合而成，每个四声音阶的四个音级之间分别构成：大二度，大二度、小二度的音程。两个四声音阶蹭相隔大二度。

**自然小调**(natural minor)：（简单记法，从A开始）中间相隔大二度。第一个四声音阶的四个音级之间分别构成大二度、小二度、大二度音程。而第二个四声音阶中音级之间的音程为小二度、大二度、大二度。

**和声小调**（harmonic minor）：把VII级导音升高半音。例如《小雨中的回忆》

**旋律小调**（melodic minor）：VI、VII级导音都升高半音，使之增二度音程不存在。但是只限上行，下行都归原位。

### 音阶

- 调式音阶的主音可以位于任意一个音级。
- 按照五度循环的规律依次考虑以C, G, D, A, E, B, ♯F, ♯C为主音的自然大调音阶，相邻两个音阶中，后一个比前一个恰好增加一个升号。
- 类似地，按照反方向，以C, F, ♭B, ♭E, ♭A, ♭D, ♭G, ♭C为主音的自然大调音阶，发现相邻两个音阶中，后一个比前一个多一个降号。

表格：

| 主音 | 升号数目 | 升号音级             |
| :--: | :------: | :------------------- |
|  C   |    0     |                      |
|  G   |    1     | ♯F                   |
|  D   |    2     | ♯F,♯C                |
|  A   |    3     | ♯F,♯C,♯G             |
|  E   |    4     | ♯F,♯C,♯G,♯D          |
|  B   |    5     | ♯F,♯C,♯G,♯D,♯A       |
|  ♯F  |    6     | ♯F,♯C,♯G,♯D,♯A,♯E    |
|  ♯C  |    7     | ♯F,♯C,♯G,♯D,♯A,♯E,♯B |

| 主音 | 降号数目 | 降号音级             |
| :--: | :------: | :------------------- |
|  C   |    0     |                      |
|  F   |    1     | ♭B                   |
|  ♭B  |    2     | ♭B,♭E                |
|  ♭E  |    3     | ♭B,♭E,♭A             |
|  ♭A  |    4     | ♭B,♭E,♭A,♭D          |
|  ♭D  |    5     | ♭B,♭E,♭A,♭D,♭G       |
|  ♭G  |    6     | ♭B,♭E,♭A,♭D,♭G,♭C    |
|  ♭C  |    7     | ♭B,♭E,♭A,♭D,♭G,♭C,♭F |

B大调和♭C大调的音阶中，各个音级都是等音的，像这样的两个调称为**等音调**。15个自然大调中，有三对等音调：B和♭C，♯F和♭G，♯C和♭D。

e小调和G大调都是♯F，

d小调和F大调具有相同的调号。

具有相同调号的大小调称为**关系大小调**。

相同主音的大小调称为**平行大小调**。

关系大小调和平行大小调

| 大调 | 平行小调 | 关系小调 |      | 大调 | 平行小调 | 关系小调 |
| ---- | -------- | -------- | ---- | ---- | -------- | -------- |
| C    | c        | a        |      |      |          |          |
| G    | g        | e        |      | F    | f        | d        |
| D    | d        | b        |      | ♭B   | ♭b       | g        |
| A    | a        | ♯f       |      | ♭E   | ♭e       | c        |
| E    | e        | ♯c       |      | ♭A   | ♭a       | f        |
| B    | b        | ♯g       |      | ♭D   | ♭d       | ♭b       |
| ♯F   | ♯f       | ♯d       |      | ♭G   | ♭g       | ♭e       |
| ♯C   | ♯c       | ♯a       |      | ♭C   | ♭c       | ♭a       |

### 和弦

三个或三个以上，按照一定音程关系结合起来，称为**和弦**（chord）（两个音的关系是音程）。

**和声学**是研究和弦的构成、连接及其在音乐作品中具体应用的理论，是主调音乐的基础。

传统和弦按照**三度叠置原则**构建起来。

按照三度音程关系叠置起来的三个音所构成的和弦称为**三和弦**。

三和弦中，按照三度音程排列时，最下面的音称为**根音**，中间的音与根音成三度关系，称为**三音**，最上面的音与根音成五度关系，称为**五音**，也称为**冠音**。

大三和弦（major triad）：大三度-小三度

小三和弦（minor triad）：小三度-大三度

增三和弦、减三和弦（不协和）

比如{♯D, 𝄪F, ♯A}不能记成{♯D, G, ♯A}（三度叠置原则）

在三和弦上方再叠加一个七度音级就构成一个**七和弦**（seventh chord）。根据七和弦所包含的三和弦类别的根音上方七度音之间的音程关系，共有七种不同的七和弦（某个和根音成重根）。

七和弦的名称：大小七和弦、小七七和弦、半减七和弦、减七和弦、大七和弦、小大七和弦、增大七和弦。

| 三度结构       | 命名结构   | 名称       | 简称       |
| -------------- | ---------- | ---------- | ---------- |
| 小三+小三+小三 | 减三、减七 | 减减七和弦 | 减七和弦   |
| 小三+小三+大三 | 减三、小七 | 减小七和弦 | 半减七和弦 |
| 小三+大三+小三 | 小三、小七 | 小小七和弦 | 小七和弦   |
| 小三+大三+大三 | 小三、大七 | 小大七和弦 |            |
| 大三+小三+小三 | 大三、小七 | 大小七和弦 | 属七和弦   |
| 大三+小三+大三 | 大三、大七 | 大大七和弦 | 大七和弦   |
| 大三+大三+小三 | 增三、大七 | 增大七和弦 |            |

### 转位

实际应用中，以根音为低音的为**原位和弦**，以三音、五音或者七音为低音的和弦称为**转位和弦**。

七和弦有三个转位： 以三度音为低音的七和弦是七和弦的第一转位，叫做**五六和弦**，用数字5、6表示； 以五度音为低音的七和弦是七和弦的第二转位，叫做**三四和弦**，用数字3、4表示； 以三度音为低音的七和弦是七和弦的第三转位，叫做**二和弦**，用数字2表示。

### 和弦标记

调式的每一个音级都可以构成七和弦的根音，用如下方式标记和弦。

1. 用罗马数字表示和弦的根音在调式音阶中的级数。用大小写区分和弦的结构
2. - 用上标°和⁺分别表示减三和弦和增三和弦；大、小三和弦不加上标。
   - 用上标°和$^\varnothing$分别表示减七和弦、半减七和弦，用ᴹ表示大七和弦或者小大七和弦，用⁺表示增大七和弦，属七和弦（大小七和弦）和小七和弦不用加上标。
3. 用下标 $_6$ 和 $^6_4$ 分别表示三和弦的第一转位和第二转位。用下标 $_7$, $^6_5$ , $^4_3$ 和 $_2$ 分别表示七和弦的原位、第一转位、第二转位和第三转位。

### 和弦的调性功能

调性和声中每一个和弦都有不同的**调性功能**（function）。

在调性的I（主音）、IV（下属音）、V（属音） 音级上构成的和弦分别称为**主和弦（I）**、**下属和弦（IV）**及**属和弦（V）**统称为**正和弦**。（恰好都是大三）

- **主和弦（I）**具有稳定性，给人结束、完成的感觉、乐曲的开始处也往往用主和弦、强调音乐的调性特征（家—home position）。
- **下属和弦（IV）**：具有连接和过渡的作用，从主和弦出发或者连接到属和弦。
- **属和弦（V）**具有不稳定性，与主和弦构成对比，给人以进行到一半、尚未结束的感觉（诗和远方）。

在一定和声范围内和和弦连接称为**和声进行**（harmonic progression），它体现出了和弦之间的相互关系、功能联系以及音响色彩。

正和弦之间的连接进行有三种基本方式：

- 正格进行：I→V→I
- 变格进行：I→IV→I
- 复式进行：I→IV→V→I
- *传统上不能V→IV*

#### 功能和弦分类

主和弦I，到start(iii,vi)，到下属和弦IV(ii)，到属和弦V(vii)。

### 调式中的和弦

- 从不协和的和弦出发，连接到协和的和弦或者较为和谐的和弦，这样的和弦进行称为**解决**（resolution），在调性音乐中所有的和弦进行最终最终都要解决到主和弦I。
- **特里斯坦和弦**（Tristan chord），突破了传统调性音乐的和弦功能的束缚，强调和弦本身的声音效果，非传统和声功能（function），剧中和弦的问题始终没有得到解决，直到剧终伊索尔德完成了“爱情之死”（Liebestod）后，全剧终止于B大调主三和弦。
- **蓝调**（blues）：12小节，反复进行，为了衔接，把最后的I变成V。
|I|I|I|I|
|-|-|-|-|
|IV|IV|I|I|
|V|IV|I|V|
- D大调卡农D A B ♯F G D G A
- “万能和弦”/卡农和弦：1 5 6 3 4 1 4 5或1 5 6 3 4 1 2 5

作业：

《我的祖国》
《山丹丹开花红艳艳》

背景材料

The Sound and the Fury: A Century of Modern Music

BBC介绍20世纪西方音乐的三集纪录片，每集时长约59分钟。



## 旋律与对称（Melody and Symmetric）

### 三个变换

- **严格移调** (exact transposition)：把一段旋律中的每个音级升高（降低）相同的半音数。
- **调性移调** (tonal transposition)：适当调整升高 (降低) 的半音数, 使得移调后得到的各个音级仍然在调式音阶中。

c小调命运交响曲，调性移调

对于音级C，E，G，做升高4个半音的**严格移调**，得到E，♯G，B，如果这三个音级分别属于C大调音阶和F大调音阶，对其做相应的**调性移调**，得到的结果分别为E，G，B和E，G，♭B。

#### 移调变换T

以Imperial 290钢琴97个键的乐音构成乐音体系，$M=\set{C_0,\cdots,B_0,C_1,\cdots,B_1,\cdots,C_7,\cdots,B_7,C_8}$

对应数字0，…，96.

给定n∈ℕ，升高n个半音的移调变换记作Tₙ，对任意音级x∈M，定义Tₙ(x)=x+n。

T₀是恒等变换。

性质：

- 交换律：Tₘ∙Tₙ=Tₙ∙Tₘ
- 结合律：∀ l, m, n∈ℤ，(Tₗ·Tₘ)∙Tₙ=Tₗ·(Tₘ∙Tₙ)
- 单位元：∀ n∈ℤ，Tₙ·T₀=Tₙ=T₀·Tₙ
- 逆变换：对于∀ Tₙ (n∈ℤ)，都∃!一个整数m=-n，使得Tₘ∙Tₙ=Tₘ∙Tₙ=Tₘ₊ₙ=T₀

#### 倒影变换I

保持中央C₄=48不变，变换为 I = 96 - x

性质：

- 二阶元：$I^2=I·I=T_0$
- Tₙ∙I=I∙T-ₙ

#### 逆行变换R

序列$x_1x_2\cdots x_{k-1}x_k,\ x_i\in M$

逆行变换后：R($x_1x_2\cdots x_{k-1}x_k,\ x_i\in M$) = $x_kx_{k-1}\cdots x_2x_1,\ x_i\in M$.

性质：

- $R^2=R·R=T_0$
- R∙Tᵢ=Tᵢ∙R，∀i
- R·I=I·R

*Niccolò Paganini*：小提琴家，24首随想曲

### 等价关系与音类

**分类**（classification）

凯撒：divide and conquer（分而治之）

等价关系见《集合论与图论》

等价类的性质：不重不漏

**音类**（pitch class）：每八度音级是一个元素，按照十二平均律，等音的视为相等，构成12个音类。

大于12的，模12取余数。

音类空间𝒫𝒞与$ℤ_{12}$的1-1对应：音类圆周

$T_n(\bar x)=\overline{x+n}，\forall\bar x\inℤ_{12}$

### 移调变换群

二面体群（dihedral group）群有五个乘法。

群G中元素个数|G|称为群的**阶**（order）。

($ℤ_{12}$,⊕)是12阶的。

正n边形的二面体群 $|D_{2n}|=2n$

(ℤ, +),(ℚ*, ×)是无理群。

满足交换律的群是Abel群。

把移一个半音记为T，则可由T生成这个群。由一个元素生成的群记作**循环群**（cyclic group）。

- 𝒯 = $<T>=\set{T, T^2, \cdots,T^{12}=e}$
- $T·I：\bar x↦1-\bar x$
- $T^k·I：\bar x↦k-\bar x，\forall k=0,1,\cdots,11$

更大的变换群：

- 𝒟=<I, T>，恰好是正十二边形的二面体群。12个旋转，共24个元素。$𝒟≅D_{24}$
- ℳ=<T, I, R>，可以证明，群ℳ的阶|ℳ|=48，其结构是一个**直积**（direct product）$ℳ=<T,I>×<R>≅D_{24}×ℕ_2$



### 十二音技术

十二音技术的出发点是**十二音序列**（twelve-tone series）。乐音体系中的所有音级依照八度关系被分成 12 个音类。

而一个**音列**（tone row）就是这 12 个音类的一个排列。

给定一个音列，可以对其进行各种变换，得到一系列新的音列。作为出发点的这个音列称作**初始音列**（primary tone row），记作P₀。对其进行移调变换，上升n个半音，就得到一个新的移调音列，记作Pₙ。

对 Pₙ 做关于其**第一个音类**的倒影变换，得到一个倒影音列，记作 Iₙ。例如对 P₀ 做倒影变换，保持其第一个音类不变，相当于对音列中每一项做变换 x → −x (mod 12)。

可见从初始音列P₀出发, 通过移调、倒影、逆行和逆行倒影变换, 可以得到 48 个音列，分别是：

| $I_0$ | $I_7$ | $I_{11}$ | $I_2$ | $I_1$ | $I_9$ | $I_3$ | $I_5$ | $I_{10}$ | $I_6$ | $I_8$ | $I_4$ |
| ----- | ----- | -------- | ----- | ----- | ----- | ----- | ----- | -------- | ----- | ----- | ----- |
|       |       |          |       |       |       |       |       |          |       |       |       |





## 音类集合和新黎曼理论

### 音类集合

音类距离1≤d≤6，这是由于有12个半音，显然。

定义pc集的距离向量δ={d₁, d₂, …, dₙ}，叫**音程含量**（total interval-content）。

移调变换$T^k$的不动点



定理7.1.5（共同音定理）

- 设一个音类集合𝒳的距离向量为δ={d₁, d₂, …, dₙ}，对于1≤k≤5，
- $$|𝒳∩T^k|=d_k=|𝒳∩T^{-k}|$$
- 对于k=6，$$|𝒳∩T^6|=2d_6$$



### 音阶



### 和弦连接与Riemann变换



### 音网

The tone nets

### 新Riemann群








♩♪♫♬♮♭♯𝄫𝄪